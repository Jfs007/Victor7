!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vicApp=t():e.vicApp=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{changeQuery:()=>c,navigate:()=>h,query:()=>u,use:()=>p,vic:()=>o});const n=function(e,t){let n={};return t.map((t=>{n[t]=e[t]})),n},i=function(e){let t=e.match(/.*(\?.*)/);t&&(e=t[1]);let n={};return e.replace(/(\w+)=?([^=&]+)?&?/g,(function(e,t,i){n[t]=i?i.trim():""})),n},s=class{app=null;constructor(e,t){this.console=new class{constructor(){}log(e){console.log("[32m",e)}error(e){return console.log(new Error(e))}warn(e){console.log("[33m",e)}}}init(e={}){for(let t in e)this[t]=e[t]}setup(){}},a=class extends s{_name="navigate";app=null;pointer=null;alias="$n";delta=-1;define={};query={};constructor(){super()}setup(e){let t=this;return this.app=e,this.define=n(this.app,["switchTab","reLaunch","redirectTo","navigateTo","navigateBack"]),this.define.navigateBaseTo=this.navigateBaseTo,Object.keys(this.define).map((e=>{Object.defineProperty(this.app,e,{get:function(){return t[e].bind(t)}})})),this}setQuery(e){let{url:t}=e;this.query=i(t)}switchTab(e={}){this.setQuery(e),this.define.switchTab.call(this.app,e)}reLaunch(e={}){this.setQuery(e),this.define.reLaunch.call(this.app,e)}redirectTo(e={}){this.setQuery(e),this.define.redirectTo.call(this.app,e)}navigateTo(e={}){this.setQuery(e),this.define.navigateTo.call(this.app,e)}navigateBack(e={}){let{delta:t}=e;"base"==t&&this.pointer?(e.delta=this.getDelta(),this.base()):e.delta=t||1,this.setQuery({url:""}),this.define.navigateBack.call(this.app,e)}navigateBaseTo(e){let t=getCurrentPages();this.pointer=t[t.length-1],this.delta=t.length,this.navigateTo(e)}base(){this.pointer=null,this.delta=-1}getDelta(){let e=this.pointer,t=this.delta;return e?getCurrentPages().length-t:-1}},r=class extends s{_name="auth";key="vic-auth";alias="$a";constructor(e){super()}setup(e={}){this.init(e)}login(){}logout(){}setToken(){}removeToken(){}getToken(){}};let o=new class{name="vic";env=null;constructor(){}setup(e){this.app=e,this.app[this.name]=this,this.load(a).setup(this.app),this.load(r)}use(e,t){this[e]=t}load(e){let t=new e;return this[t.alias]=t,this[t._name]=t,t}};function l(){var e=getCurrentPages();return e[e.length-1]}function u(e={}){let t=(e.context?e.context:l()||{}).options||{};return Object.assign({},t,o.navigate.query||{})}function c(e={}){let t=l();o.navigate.query=Object.assign(u(),e||{}),t&&t.options&&(t.options=o.navigate.query)}function p(e,t){o.use(e,t)}const h=o.navigate;return t})()));